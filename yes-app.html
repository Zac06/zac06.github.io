<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YES-App</title>
    <link rel="stylesheet" href="style-yes.css">
</head>
<body>

    <div class="titlebox">
        <img src="res/titlelogo.png" alt="yes-app" class="yesimg">
        <div class="title">App</div>
    </div>

    <div class="mockupcont">
        <img src="res/yes-app-mockup.png" alt="mockup" class="mockup">
    </div>

    <div class="buttonscont">
        <a id="downloadLink" href="#" target="_blank">
            <div class="button">
                <img src="res/android.png" alt="download" class="buttonicon">Download
            </div>
        </a>
        <a href="https://github.com/Zac06/yes-app" target="_blank">
            <div class="button">
                <img src="res/code_blue.png" alt="source" class="buttonicon">Source
            </div>
        </a>
    </div>

    <div class="buttonscont">
        <div>
            Il download qui sopra &egrave; universale ma pesante.<br>
            Se vuoi una versione pi&ugrave; leggera, scegli 
            <a href="https://github.com/Zac06/yes-app/releases/latest" target="_blank" class="otherdown">
                la variante per te qui.
            </a>
        </div>
        
        
    </div>

    

    <div class="footer">&ZeroWidthSpace;</div>

    <script>
        const owner = 'Zac06';
        const repo = 'yes-app';

        fetch(`https://api.github.com/repos/${owner}/${repo}/releases/latest`)
            .then(res => res.json())
            .then(data => {
                if (!data.assets || data.assets.length === 0) return;

                // 1️⃣ Try to find a "universal" APK
                let asset = data.assets.find(a =>
                    a.name.toLowerCase().includes('universal') &&
                    a.name.toLowerCase().endsWith('.apk')
                );

                // 2️⃣ Fallback to app-release.apk
                if (!asset) {
                    asset = data.assets.find(a =>
                        a.name.toLowerCase() === 'app-release.apk'
                    );
                }

                if (asset) {
                    const link = document.getElementById('downloadLink');
                    link.href = asset.browser_download_url;
                }
            })
            .catch(err => console.error('GitHub API error:', err));
    </script>

</body>
</html>
